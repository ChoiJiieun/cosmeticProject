<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="comm.proj.my.cosmetic.dao.ICosDAO">

	<!-- 검색어로 입력한 화장품 리스트 -->
	<select id="searchInfo" resultType="CosVO" parameterType="String">
		SELECT cosmetic_no
		     , name
		     , cos_image
		     , cate_cd
		     , company_name
		     , company_logo
		     , star_score
		FROM cosmetic
		WHERE name LIKE '%' || #{keyword} || '%'
		 OR   company_name LIKE '%' || #{keyword} || '%'
		ORDER BY cosmetic_no
	</select>
	
	<!-- 화장품 상세 조회 -->
	<select id="cosmetic_detail" resultType="CosVO" parameterType="int">
		SELECT *
		FROM cosmetic
		WHERE cosmetic_no = #{cosmeticNo}
	</select>	
	
	<!-- 화장품 리뷰 조회 -->
	<select id="cosmetic_review" resultType="ReviewVO" parameterType="int">
		SELECT r.review_no
		     , r.good_comment
		     , r.bad_comment
		     , r.star_score
		     , TO_CHAR(r.create_dt, 'YYYY-MM-DD')
		     , r.cosmetic_no
		     , r.mem_id
		     , nvl(m.mem_nickname, m.mem_nm) as mem_writer
		     , m.profile_img
		FROM review r, members m
		WHERE cosmetic_no = #{cosmeticNo}
		 AND  r.mem_id = m.mem_id
	</select>
	
	<!-- 화장품 성분 조회 -->
	<select id="ingre_info" resultType="IngredientVO" parameterType="int">
		SELECT *
		FROM ingredient
		WHERE cosmetic_no = #{cosmeticNo}
	</select>
	
</mapper>